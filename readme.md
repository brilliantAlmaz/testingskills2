Результат можно посмотреть [здесь](https://brilliantalmaz.github.io/testingskills2/)

## Предисловие

* Все написано в чистом коде. Стили самые минимальные.
* Данные хранятся в localStorage, без использования БД или текстового файла для экономии времени
* Логика обновления, редактирования и удаления данных реализована на js

## Начало работы

Изначальные данные хранятся в файле data.js:
```js
let data = {
   "deals": [
      {
         id: 1,
         label: "Хотят люстру",
         sum: 4000,
         contacts: [1, 2, 3]
      },
      {
         id: 2,
         label: "Хотят светильник",
         sum: 4000,
         contacts: [2, 3]
      },
      {
         id: 3,
         label: "Пока думают",
         sum: 4000,
         contacts: [1, 3]
      }
   ],
   'contacts': [
      {
         id: 1,
         client_name: "Василий",
         client_surname: "Иванов",
         deals: [1, 3]
      },
      {
         id: 2,
         client_name: "Иван",
         client_surname: "Петров",
         deals: [1, 2]
      },
      {
         id: 3,
         client_name: "Наталья ",
         client_surname: "Сидорова",
         deals: [1, 2, 3]
      }
   ],
};

```

Предполагается что в меню находятся 2 элемента: Сделки (deals) и Контакты (contacts). В data они прописаны таким образом,что у каждого элемента есть свои данные.
Для Сделок: id - айди, label - название, sum - Сумма, contacts - массив из id контактов,к которым привязана сделка
Для Контактов: id- айди, client_name - имя, client_surname - фамилия, deals - массив из id сделок,к которым привязан контакт.

Предполагается,что в начале некоторые сделки привязаны к контактам.

## Принцип работы

Шаблон:
```html
<div class="content">
   <div class="content__col _theme">
      <div class="content__head">Меню</div>
      <div class="theme__item content__item shown" data-id="1">Сделки</div>
      <div class="theme__item content__item shown" data-id="2">Контакты</div>
   </div>
   <div class="content__col _undertheme">
      <div class="content__head">Список</div>



   </div>
   <div class="content__col _text">
      <div class="content__head">Содержание</div>



   </div>

</div>
```
В _theme- находятся меню (сделки и контакты), в undertheme - данные каждого элемента меню, _text - содержимое каждого undertheme.

Показываемые элементы отмечены классом shown, активные - active. Для каждого элемента предусмотрена вложенность через dataset атрибуты (data-theme, data-undertheme, data-id и т д).

### Редактирование
Все редактируемые данные при фокусе окрашиваются оранжевым цветом для ясности. При изменении любого поля, данные сохраняются в localStorage.

Добавлении связей, что для контактов и сделок, одинаковое - при клике на кнопку добавить у содержимого идет расчет связей (к какому меню принадлежит,к какому элементу списка прикреплен). 
При активном меню "Сделки", скрипт проверяет для текущего undertheme какие контакты использовались и выводит невошедшие id для выбора. В случае когда для одной сделки указаны все контакты - выводится сообщение о наличии всех контактов. 
При добавлении нового контакта, информация о связанной сделки указывается и внутри этого контакта. Однако удалять новые связи нельзя. *При добавлении таким образом связей - нужно обновить страницу!*

### Удаление
Возле каждого удаляемого элемента отрисована красная кнопка с крестиком. По клике на связи - убирается выбранный элемент как на текущей вкладке, так и во вкладке контакта.
При удалении элемента списка, удаляется сам элемент и его содержимое безвозвратно

### Добавление нового элемента списка

Элемент списка добавляется через кнопку внизу Списка. Все кликабельные элементы становятся замороженными и в колонке содержания предлагается заполнить данные. Поле ID - нельзя редактировать, ID назначается программно, увеличивая на 1 самое большое значение id для указанного меню (имитация autoincrement).

Добавлятьсвязи при добавлении элемента списка нельзя, можно добавлятьсвязи, только после сохранения (синяя кнопка Сохранить). Страница перезагрузится и можно будет указывать связи элементов.
